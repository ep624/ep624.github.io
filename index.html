<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-02-06 Thu 19:40 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EP624: Statistical Programming and Reproducible Research</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Vikas Rawal" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/readtheorg/js/readtheorg.js"></script>
<style>#content{max-width:1200px;} </style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">EP624: Statistical Programming and Reproducible Research</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org4d8f174">1. System Setup</a>
<ul>
<li><a href="#org9f1424f">1.1. Operating System</a></li>
<li><a href="#org6a27711">1.2. Applications</a></li>
<li><a href="#orgb86d86b">1.3. Emacs configuration</a></li>
</ul>
</li>
<li><a href="#orge8f754d">2. Introduction to Computer Programming</a>
<ul>
<li><a href="#org572c083">2.1. Introduction to the course</a>
<ul>
<li><a href="#orga749316">Why should you use programming for statistical analysis?</a></li>
<li><a href="#org1194bd7">Why use R?</a></li>
</ul>
</li>
<li><a href="#org4858574">2.2. Introduction to shell programming</a>
<ul>
<li><a href="#orgabd18d7">Introduction to *nix file system</a></li>
<li><a href="#org7481537">Important Bash Commands to Learn</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org681bfbe">3. Introduction to Emacs</a>
<ul>
<li><a href="#org9b1df9b">3.1. Introduction to Emacs</a>
<ul>
<li><a href="#orgfceff0c">Notations</a></li>
<li><a href="#orgf873cf1">Basic commands</a></li>
</ul>
</li>
<li><a href="#org13d5a56">3.2. Resources</a></li>
</ul>
</li>
<li><a href="#org6e3222d">4. Basics of R Programming</a>
<ul>
<li>
<ul>
<li><a href="#org98b2ac7">Some basic commands in R</a></li>
</ul>
</li>
<li><a href="#org67397fa">4.1. Data structures in R</a>
<ul>
<li><a href="#org7d8f63a">Vectors</a></li>
<li><a href="#org6d6e93f">Data frames</a></li>
</ul>
</li>
<li><a href="#org9bfdd07">4.2. Statistical Graphics with ggplot2</a></li>
<li><a href="#orgd16c2a0">4.3. data.table</a></li>
<li><a href="#orgdc1b796">4.4. Analysis of Survey Data in R</a></li>
<li><a href="#org59b67a3">4.5. Econometric Analysis in R</a></li>
</ul>
</li>
<li><a href="#orgd0f9917">5. Reproducible Research Using Emacs Orgmode and R</a>
<ul>
<li><a href="#org85afc03">5.1. Introduction to orgmode</a>
<ul>
<li><a href="#orgmodebasics">Org-mode basics</a></li>
<li><a href="#orgmodeandr">Org-mode and R</a></li>
</ul>
</li>
<li><a href="#org0ca66e6">5.2. Formatting tables and figures for print</a></li>
<li><a href="#org951f1ca">5.3. Citation management using org-ref and biblatex</a></li>
</ul>
</li>
</ul>
</div>
</div>


<div id="outline-container-org4d8f174" class="outline-2">
<h2 id="org4d8f174"><span class="section-number-2">1</span> System Setup</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org9f1424f" class="outline-3">
<h3 id="org9f1424f"><span class="section-number-3">1.1</span> Operating System</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>Install any latest distribution of GNU/Linux on your computer. I use Manjaro, but feel free to install any.
<ul class="org-ul">
<li>If you have a Mac, you can continue using OSX, and install the required applications on OSX.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org6a27711" class="outline-3">
<h3 id="org6a27711"><span class="section-number-3">1.2</span> Applications</h3>
<div class="outline-text-3" id="text-1-2">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #888a85; background-color: #ffffff; font-style: italic;">## </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">This is how my computer is setup. These commands are for Arch Linux/Manjaro.</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;">## </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">You can install the same applications in other distributions using their package managers.</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;">## </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">These commands should be run one line at a time. Do not run it as a script.</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;">## </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Modify to suit your requirements</span>
sudo pacman -Ssy
sudo pacman -S emacs firefox texlive-most biber nmap openssh yay gimp phpmyadmin evince git git-lfs mpv vlc r htop neomutt isync pass mariadb postgresql aspell-en termite pass notmuch go tk afew ack keychain chromium msmtp unison python-pip python-imaging ghostscript hplip geos youtube-dl evince pandoc-citeproc
sudo pacman -R palemoon
sudo pacman -S rofi <span style="color: #888a85; background-color: #ffffff; font-style: italic;">#</span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Only if you use i3wm</span>
sudo pacman -U https://www.archlinux.org/packages/community/x86_64/browserpass/download/
sudo pacman -S browserpass-firefox browserpass-chromium
systemctl enable sshd
yay -S dropbox
yay -S megasync
yay -S keybase-bin
yay -S skype
yay -S signal-desktop
yay -S mimio
yay -S libreoffice-extension-languagetool
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb86d86b" class="outline-3">
<h3 id="orgb86d86b"><span class="section-number-3">1.3</span> Emacs configuration</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Following commands will configure emacs for the requirements of this course.
</p>

<div class="org-src-container">
<pre class="src src-sh">
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">If you do not already have ssh keys, create them as below</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">mkdir ~/.ssh</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">cd ~/.ssh</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">ssh-keygen -t rsa #No need to use a password, when asked. Just press enter.</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">cd</span>

<span style="color: #888a85; background-color: #ffffff; font-style: italic;">## </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">You should add the public key (by default, the file ~/.ssh/id_rsa.pub) to your github account.</span>
git clone git@github.com:vikasrawal/prelude-ep624.git <span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Use this if you have added your public ssh key to your github account.</span>
git clone https://github.com/vikasrawal/prelude-ep624.git <span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Use this if you do not have a github account with your public ssh key added to it.</span>

mv .emacs.d .emacs.d.old <span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Renames if you already have a .emacs.d directory</span>
mv prelude-ep624 .emacs.d
<span style="color: #75507b;">cd</span> .emacs.d
git checkout ep624
<span style="color: #75507b;">cd</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge8f754d" class="outline-2">
<h2 id="orge8f754d"><span class="section-number-2">2</span> Introduction to Computer Programming</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org572c083" class="outline-3">
<h3 id="org572c083"><span class="section-number-3">2.1</span> Introduction to the course</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-orga749316" class="outline-4">
<h4 id="orga749316">Why should you use programming for statistical analysis?</h4>
<div class="outline-text-4" id="text-orga749316">
<ul class="org-ul">
<li>Programming makes your results reproducible and verifiable.</li>
<li>It is easier to revise your estimations, graphs, tables etc if you write and save your programs.</li>
<li>Updating your analysis, for example when new data become available, is easy, as the same/modified programs could be run on new data to get new results.</li>
</ul>
</div>
</div>
<div id="outline-container-org1194bd7" class="outline-4">
<h4 id="org1194bd7">Why use R?</h4>
<div class="outline-text-4" id="text-org1194bd7">
<ul class="org-ul">
<li>R is open-source and free of cost.
<ul class="org-ul">
<li>Will always remain available.</li>
<li>Development is fast; tools for using new, cutting-edge statistical techniques become available as add-on packages.</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org4858574" class="outline-3">
<h3 id="org4858574"><span class="section-number-3">2.2</span> Introduction to shell programming</h3>
<div class="outline-text-3" id="text-2-2">
</div>
<div id="outline-container-orgabd18d7" class="outline-4">
<h4 id="orgabd18d7">Introduction to *nix file system</h4>
</div>

<div id="outline-container-org7481537" class="outline-4">
<h4 id="org7481537">Important Bash Commands to Learn</h4>
<div class="outline-text-4" id="text-org7481537">
<ul class="org-ul">
<li>Help
<ul class="org-ul">
<li>man</li>
</ul></li>
<li>File management
<ul class="org-ul">
<li>ls</li>
<li>mkdir</li>
<li>cp</li>
<li>mv</li>
<li>rm</li>
<li>ssh, scp, rsync</li>
<li>find</li>
<li>ack</li>
</ul></li>
<li>Navigation
<ul class="org-ul">
<li>cd</li>
</ul></li>
<li>Seeing/modifying files on the commandline
<ul class="org-ul">
<li>cat, more, less</li>
<li>head, tail</li>
<li>awk, sed</li>
<li>diff</li>
</ul></li>
<li>Redirection
<ul class="org-ul">
<li>&gt;, &gt;&gt;, |</li>
</ul></li>
<li>Others
<ul class="org-ul">
<li>grep</li>
<li>&ldquo;ip address show&rdquo;</li>
<li>sort</li>
<li>uniq</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org681bfbe" class="outline-2">
<h2 id="org681bfbe"><span class="section-number-2">3</span> Introduction to Emacs</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org9b1df9b" class="outline-3">
<h3 id="org9b1df9b"><span class="section-number-3">3.1</span> Introduction to Emacs</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Emacs is an extremely powerful cross-platform editor which can be used for all kinds of tasks that you do on your computer. Although Emacs is different from every other editor you are likely to have used, learning to use Emacs would be a huge asset for your computing abilities. A good way to learn Emacs, to ask, for each activity you do on your computer, can I do this using Emacs? You will be amazed at how many times the answer is: yes, and more efficiently than in your current application.
</p>

<p>
This section, however, does not provide a detailed guide to the use of Emacs.
</p>

<p>
In this guide, I will just provide a minimal set of basic commands in
emacs to get you started. This is a minimal but sufficient set to be
able to work. I expect that you would learn more commands as you start
using emacs.
</p>
</div>

<div id="outline-container-orgfceff0c" class="outline-4">
<h4 id="orgfceff0c">Notations</h4>
<div class="outline-text-4" id="text-orgfceff0c">
<p>
In emacs, a buffer is equivalent to a tab in a web browser. It is
normal to have several buffers open at the same time. Each file opens
in emacs as a buffer. Buffers could also have processes like R running
in them. Emacs displays any messages for you in a separate buffer.
</p>

<p>
Most commands in emacs are given using the Control (ctrl) or the Meta
(often mapped to alt) keys. Control key is usually referred to as <code>C-</code>
and the Meta key as <code>M-</code>. So a command <code>C-c</code> means pressing Control
and c together. Command <code>M-x</code> means pressing Meta and x
together. Everything is case-sensitive. So <code>M-X</code> would mean, pressing
Meta, Shift and x together. <code>C-c M-x l</code> would mean pressing C-c,
release, then M-x, release, and then l.
</p>
</div>
</div>

<div id="outline-container-orgf873cf1" class="outline-4">
<h4 id="orgf873cf1">Basic commands</h4>
<div class="outline-text-4" id="text-orgf873cf1">
<p>
Table <a href="#orgd9a5e59">1</a> gives the commands that are the most
important. This is a minimal set, commands that you should aim to
learn as soon as possible. There are many more, which you will learn
as you start using emacs.
</p>

<p>
All commands have a verbose version that can be used by pressing <code>M-x</code>
and writing the command. For example, <code>M-x find-file</code> to open a file.
All major commands are also mapped to a shortcut. For example, instead
of typing <code>M-x find-file</code> to open a file, you can say <code>C-x C-f</code>. I
remember shortcuts for commands that I use most frequently. For
others, I use the verbose versions. Over time, one learns more
shortcuts and starts using them instead of the verbose versions.
</p>

<table id="orgd9a5e59" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> Essential emacs commands</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">Verbose command</th>
<th scope="col" class="org-left">Shortcut</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left"><code>M-x</code> followed by</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><i><b>Opening files, saving and closing</b></i></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><i>Open a file</i></td>
<td class="org-left"><code>find-file</code></td>
<td class="org-left"><code>C-x C-f</code></td>
</tr>

<tr>
<td class="org-left"><i>Save the buffer/file</i></td>
<td class="org-left"><code>save-buffer</code></td>
<td class="org-left"><code>C-x C-s</code></td>
</tr>

<tr>
<td class="org-left"><i>Save as: prompts for a new filename and saves the buffer into it</i></td>
<td class="org-left"><code>write-named-file</code></td>
<td class="org-left"><code>C-x C-w</code></td>
</tr>

<tr>
<td class="org-left"><i>Save all buffers and quit emacs</i></td>
<td class="org-left"><code>save-buffers-kill-emacs</code></td>
<td class="org-left"><code>C-x C-c</code></td>
</tr>

<tr>
<td class="org-left"><i><b>Copy, Cut and Delete Commands</b></i></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><i>Delete the rest of the current line</i></td>
<td class="org-left"><code>kill-line</code></td>
<td class="org-left"><code>C-k</code></td>
</tr>

<tr>
<td class="org-left"><i>To select text, press this at the beginning of the region and then take the cursor to the end</i></td>
<td class="org-left"><code>set-mark-command</code></td>
<td class="org-left"><code>C-spacebar</code></td>
</tr>

<tr>
<td class="org-left"><i>Cut the selected region</i></td>
<td class="org-left"><code>kill-region</code></td>
<td class="org-left"><code>C-w</code></td>
</tr>

<tr>
<td class="org-left"><i>Copy the selected region</i></td>
<td class="org-left"><code>copy-region-as-kill</code></td>
<td class="org-left"><code>M-w</code></td>
</tr>

<tr>
<td class="org-left"><i>Paste or insert at current cursor location</i></td>
<td class="org-left"><code>yank</code></td>
<td class="org-left"><code>C-y</code></td>
</tr>

<tr>
<td class="org-left"><i><b>Search Commands</b></i></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><i>prompts for text string and then searches from the current cursor position forwards in the buffer</i></td>
<td class="org-left"><code>isearch-forward</code></td>
<td class="org-left"><code>C-s</code></td>
</tr>

<tr>
<td class="org-left"><i>Find-and-replace: replaces one string with another, one by one, asking for each occurrence of search string</i></td>
<td class="org-left"><code>query-replace</code></td>
<td class="org-left"><code>M-%</code></td>
</tr>

<tr>
<td class="org-left"><i>Find-and-replace: replaces all occurrences of one string with another</i></td>
<td class="org-left"><code>replace-string</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><i><b>Other commands</b></i></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Divide a long sentence into multiple lines, each smaller than the maximum width specified</td>
<td class="org-left"><code>fill-paragraph</code></td>
<td class="org-left"><code>M-q</code></td>
</tr>

<tr>
<td class="org-left"><i><b>Window and Buffer Commands</b></i></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><i>Switch to another buffer</i></td>
<td class="org-left"><code>switch-to-buffer</code></td>
<td class="org-left"><code>C-x b</code></td>
</tr>

<tr>
<td class="org-left"><i>List all buffers</i></td>
<td class="org-left"><code>list-buffers</code></td>
<td class="org-left"><code>C-x C-b</code></td>
</tr>

<tr>
<td class="org-left"><i>Split current window into two windows; each window can show same or different buffers</i></td>
<td class="org-left"><code>double-window</code></td>
<td class="org-left"><code>C-x 2</code></td>
</tr>

<tr>
<td class="org-left"><i>Remove the split</i></td>
<td class="org-left"><code>zero-window</code></td>
<td class="org-left"><code>C-x 0</code></td>
</tr>

<tr>
<td class="org-left"><i>When you have two or more windows, move the cursor to the next window</i></td>
<td class="org-left"><code>other-window</code></td>
<td class="org-left"><code>C-x o</code></td>
</tr>

<tr>
<td class="org-left"><i><b>Canceling and undoing</b></i></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><i>Abort the command in progress</i></td>
<td class="org-left"><code>keyboard-quit</code></td>
<td class="org-left"><code>C-g</code></td>
</tr>

<tr>
<td class="org-left"><i>Undo</i></td>
<td class="org-left"><code>undo</code></td>
<td class="org-left"><code>C-_</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org13d5a56" class="outline-3">
<h3 id="org13d5a56"><span class="section-number-3">3.2</span> Resources</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li><a href="https://www2.lib.uchicago.edu/keith/tcl-course/emacs-tutorial.html">A Tutorial Introduction to GNU Emacs</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org6e3222d" class="outline-2">
<h2 id="org6e3222d"><span class="section-number-2">4</span> Basics of R Programming</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li>R is a case sensitive language. Do not mix upper case and lower case characters.</li>
<li>You should have a separate directory for each project/article you work on.</li>
<li>By default, the work you do is saved in this working directory in a file called .RData</li>
<li>All R commands are followed by <code>()</code>. Arguments that the command needs are given inside the parentheses. Empty parentheses have to be used even if a command needs no arguments. For example,
<ul class="org-ul">
<li><code>q</code> will not work as a command</li>
<li><code>q()</code> is a command</li>
<li><code>q(save="yes")</code> is a command with an argument that asks the R environment to be saved before quitting.</li>
</ul></li>
<li><code>-&gt;</code> or <code>&lt;-</code> is used to create an object using output of a command.
<ul class="org-ul">
<li><code>c(1:5)-&gt;col1</code> creates an object col1 containing the output of the command <code>c(1:5)</code>.</li>
<li><code>col1&lt;-c(1:5)</code> also does the same thing.</li>
</ul></li>
<li>In this guide, all commands are formatted using a mono-spaced font to distinguish them. Such lines are numbered. But line numbers are not a part of the command. In the boxes, text starting with a <code>#</code> is used to write comments for the reader. These comments are not part of the commands. You do not need to type them into R as any line starting with a <code>#</code> is treated as a comment in R and not executed. When you write your own programs, use lines starting with <code>#</code> to write your own comments that may be necessary to make your program intelligible to your collaborators.</li>
</ul>
</div>

<div id="outline-container-org98b2ac7" class="outline-4">
<h4 id="org98b2ac7">Some basic commands in R</h4>
<div class="outline-text-4" id="text-org98b2ac7">
<div class="org-src-container">
<pre class="src src-R"><span class="linenr"> 1: </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Text after # is a comment to explain what the command does</span>
<span class="linenr"> 2: </span>q() <span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Quit R; prompts for saving the workspace.</span>
<span class="linenr"> 3: </span>?command <span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Open help for 'command'; q to quit help.</span>
<span class="linenr"> 4: </span>??keyword <span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">List commands with 'keyword' in the title</span>
<span class="linenr"> 5: </span>help.search(<span style="color: #8f5902; font-style: italic;">"keyword"</span>) <span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">List commands with 'keyword'</span>
<span class="linenr"> 6: </span>                       <span style="color: #888a85; background-color: #ffffff; font-style: italic;">#  </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">anywhere in the docs</span>
<span class="linenr"> 7: </span><span style="color: #8f5902; font-style: italic;">setwd</span>(<span style="color: #8f5902; font-style: italic;">"c:/project1"</span>)  <span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Sets the working directory</span>
<span class="linenr"> 8: </span>                      <span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">to c:/project1</span>
<span class="linenr"> 9: </span><span style="color: #8f5902; font-style: italic;">setwd</span>(<span style="color: #8f5902; font-style: italic;">"~/proj2"</span>)  <span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">In Linux or OSX, sets the</span>
<span class="linenr">10: </span>                  <span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">working directory to ~/proj2</span>
<span class="linenr">11: </span>getwd() <span style="color: #888a85; background-color: #ffffff; font-style: italic;">#</span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Reports the present working directory</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org67397fa" class="outline-3">
<h3 id="org67397fa"><span class="section-number-3">4.1</span> Data structures in R</h3>
<div class="outline-text-3" id="text-4-1">
</div>
<div id="outline-container-org7d8f63a" class="outline-4">
<h4 id="org7d8f63a">Vectors</h4>
<div class="outline-text-4" id="text-org7d8f63a">
<ul class="org-ul">
<li>A vector is a column of data. The most basic command for creating a vector (think of a column) is <code>c()</code>.
<ul class="org-ul">
<li><code>c(1:50)</code> creates a vector with numbers 1 to 50.</li>
</ul></li>
<li>If vec1 is a vector, vec1[i] refers to i<sup>th</sup> element of the vector.</li>
<li>A vector can be a numeric vector, a character vector, or a factor (categorical) vector.
– character variables are text strings,
– numeric variables are numbers
– factors are categorical variables, in which each observation belongs to a category. Category labels may be numeric or characters. Even when they are numeric, they are just labels for categories and should not be confused as numbers.</li>
</ul>

<div class="NewBox" id="vectorintro">
<p>

</p>

<p>
A numeric vector is a collection of numbers.
</p>

<div class="org-src-container">
<pre class="src src-R" id="org12bb58c">
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Line 3 creates a numeric vector called col1 with</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">13 elements: numbers 1 to 10, 11, 14.5 and 6.</span>
c(1:10,11,14.5,6)<span style="color: #8f5902; font-style: italic;">-&gt;</span>col1
col1
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Line 6 creates a character vector called col2 with</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">four elements, each being a string of characters</span>
c(<span style="color: #8f5902; font-style: italic;">"Sheela"</span>,<span style="color: #8f5902; font-style: italic;">"Manoj"</span>,<span style="color: #8f5902; font-style: italic;">"Karim"</span>,<span style="color: #8f5902; font-style: italic;">"John"</span>)<span style="color: #8f5902; font-style: italic;">-&gt;</span>col2
col2
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Line 9 creates a factor vector in which each element</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">belongs to category "M" or "F".</span>
as.factor(c(<span style="color: #8f5902; font-style: italic;">"M"</span>,<span style="color: #8f5902; font-style: italic;">"M"</span>,<span style="color: #8f5902; font-style: italic;">"M"</span>,<span style="color: #8f5902; font-style: italic;">"F"</span>,<span style="color: #8f5902; font-style: italic;">"F"</span>,<span style="color: #8f5902; font-style: italic;">"M"</span>,<span style="color: #8f5902; font-style: italic;">"M"</span>))<span style="color: #8f5902; font-style: italic;">-&gt;</span>col3
col3
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Line 13 reads a factor vector and outputs a vector that</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">is a list of categories. In this case, the output would</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">be ~[1] "F" "M"~</span>
levels(col3)
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Line 15 can be used to check what type of object is col3.</span>
class(col3)
</pre>
</div>

<p>
<b>Results of running the code above</b>
</p>

<pre class="example">
 [1]  1.0  2.0  3.0  4.0  5.0  6.0  7.0  8.0  9.0 10.0 11.0 14.5  6.0
[1] "Sheela" "Manoj"  "Karim"  "John"
[1] M M M F F M M
Levels: F M
[1] "F" "M"
[1] "factor"
</pre>

</div>
</div>
</div>

<div id="outline-container-org6d6e93f" class="outline-4">
<h4 id="org6d6e93f">Data frames</h4>
<div class="outline-text-4" id="text-org6d6e93f">
<ul class="org-ul">
<li>A data frame is a collection of vectors. It is a table that stores variables in columns and observations in rows. You could think of data frames as equivalent to a spreadsheet with many columns. When you import a data file, it would normally be imported as a data frame.</li>
<li>However, there is one important difference. In an R data frame, each column is a particular type of vector (numeric, character or factor). You cannot mix the type of data in a given column. A spreadsheet, in contrast, can contain anything in any cell.</li>
<li>Just as for a vector col1, col1[i] refers to the i<sup>th</sup> element, in a data frame data[i,j] refers to the element in i<sup>th</sup> row and j<sup>th</sup> column. Note that the first argument (before the comma) specifies the rows and the second argument (after the comma) specifies the columns. This is one way to subset data frames.
<ul class="org-ul">
<li><code>data[1:9,c(2,5,6)]</code> picks the first nine rows and column nos 2, 5 and 6.</li>
<li><code>data[data[,1]-&gt;10000,]</code> selects all rows in which the first column is greater than 10000, and for these rows, shows all columns. Note that not specifying anything after comma is interpreted as all columns. Similarly, nothing before the comma would be interpreted as all rows.</li>
</ul></li>
<li><code>data1$var1</code> refers to vector var1 inside data frame data1.
<ul class="org-ul">
<li><code>data1$var1^2-&gt;data1$var5</code> calculates square of var1 in data1 and inserts it as a new vector (var5) in data1.</li>
<li><code>data1$var1+2*data1$var2-&gt;data1$var2</code> calculates takes var1 and var2 from data1, computres var1+2*var2, and replaces var2 in data1 with the computed variable.</li>
</ul></li>
<li>R provides a large number of commands to manipulate data frames in various ways. You should master these. See Box <a href="#orgce791d5">1</a> to learn commands for selecting subsets of data frames, match merging data frames, appending data frames, adding rows and columns to data frames, and reshaping data frames.</li>
</ul>

<div class="NewBox" id="dataframeintro">
<p>

</p>

<div class="org-src-container">
<pre class="src src-R">
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Selecting rows</span>
subset(data1,var1&gt;10000)<span style="color: #8f5902; font-style: italic;">-&gt;</span>data2

<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">Selecting columns (may be combined with argument for</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">selecting rows).</span>

subset(data1,select=c(<span style="color: #8f5902; font-style: italic;">"var1"</span>,<span style="color: #8f5902; font-style: italic;">"var5"</span>,<span style="color: #8f5902; font-style: italic;">"var10"</span>))<span style="color: #8f5902; font-style: italic;">-&gt;</span>data2

<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">merging data frames using variables var1 and var2,</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">selecting only matching rows of data3 and data4.</span>

merge(data3, data4, by=c(<span style="color: #8f5902; font-style: italic;">"var1"</span>,<span style="color: #8f5902; font-style: italic;">"var2"</span>))<span style="color: #8f5902; font-style: italic;">-&gt;</span>data5

<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">merging data frames using variables var1 and var2,</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">selecting all rows of data3 and matching rows of data4. Rows</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">with no matching information from data4 will have NAs</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">in columns coming from data4</span>

merge(data3, data4, by=c(<span style="color: #8f5902; font-style: italic;">"var1"</span>,<span style="color: #8f5902; font-style: italic;">"var2"</span>),
      all.x=<span style="color: #a40000;">TRUE</span>)<span style="color: #8f5902; font-style: italic;">-&gt;</span>data5

<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">merging data frames using variables var1 and var2,</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">selecting all rows of data4 and matching rows of data3</span>

merge(data3, data4, by=c(<span style="color: #8f5902; font-style: italic;">"var1"</span>,<span style="color: #8f5902; font-style: italic;">"var2"</span>),
      all.y=<span style="color: #a40000;">TRUE</span>)<span style="color: #8f5902; font-style: italic;">-&gt;</span>data5

<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">merging data frames using variables var1 and var2,</span>
<span style="color: #888a85; background-color: #ffffff; font-style: italic;"># </span><span style="color: #888a85; background-color: #ffffff; font-style: italic;">selecting all rows of data 3 and data4.</span>

merge(data3, data4, by=c(<span style="color: #8f5902; font-style: italic;">"var1"</span>,<span style="color: #8f5902; font-style: italic;">"var2"</span>),
      all=<span style="color: #a40000;">TRUE</span>)<span style="color: #8f5902; font-style: italic;">-&gt;</span>data5


</pre>
</div>

</div>
</div>
</div>
</div>

<div id="outline-container-org9bfdd07" class="outline-3">
<h3 id="org9bfdd07"><span class="section-number-3">4.2</span> Statistical Graphics with ggplot2</h3>
</div>
<div id="outline-container-orgd16c2a0" class="outline-3">
<h3 id="orgd16c2a0"><span class="section-number-3">4.3</span> data.table</h3>
</div>
<div id="outline-container-orgdc1b796" class="outline-3">
<h3 id="orgdc1b796"><span class="section-number-3">4.4</span> Analysis of Survey Data in R</h3>
</div>
<div id="outline-container-org59b67a3" class="outline-3">
<h3 id="org59b67a3"><span class="section-number-3">4.5</span> Econometric Analysis in R</h3>
</div>
</div>

<div id="outline-container-orgd0f9917" class="outline-2">
<h2 id="orgd0f9917"><span class="section-number-2">5</span> Reproducible Research Using Emacs Orgmode and R</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org85afc03" class="outline-3">
<h3 id="org85afc03"><span class="section-number-3">5.1</span> Introduction to orgmode</h3>
<div class="outline-text-3" id="text-5-1">
</div>
<div id="outline-container-orgaf865bd" class="outline-4">
<h4 id="orgmodebasics">Org-mode basics</h4>
<div class="outline-text-4" id="text-orgmodebasics">
</div>

<ul class="org-ul">
<li><a id="org21c3f70"></a>Preamble<br />
<div class="outline-text-5" id="text-org21c3f70">
<p>
An Org file has a few special lines at the top that set up the
environment. Following lines are an example of the minimal set of
lines that we shall use.
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #7f7f7f; font-weight: bold;">#+TITLE:</span> <span style="color: #b22222; background-color: #ffffff;">Using Emacs, Org-mode and R for Research Writing in Social Sciences</span>
<span style="color: #888a85; background-color: #ffffff;">#+SUBTITLE: A Toolkit for Writing Reproducible Research Papers and Monographs</span>
<span style="color: #7f7f7f; font-weight: bold;">#+AUTHOR:</span> <span style="color: #b22222; font-size: 125%; font-weight: bold;">Vikas Rawal</span>
<span style="color: #7f7f7f; font-weight: bold;">#+DATE:</span> <span style="color: #b22222; font-size: 125%; font-weight: bold;">May 4, 2014</span>
<span style="color: #888a85; background-color: #ffffff;">#+OPTIONS: toc:2 H:3 num:2</span>
</pre>
</div>

<p>
As you can see, each line starts with a keyword, and the values for
this keyword are specified after the colon.
</p>

<p>
Table <a href="#org59a7e3a">2</a> gives details of a few major special lines that we shall use.
</p>

<table id="org59a7e3a" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 2:</span> Main special lines to be used at the top of an Org buffer</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Keyword</th>
<th scope="col" class="org-left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>#+TITLE</code></td>
<td class="org-left">To declare title of the paper</td>
</tr>

<tr>
<td class="org-left"><code>#+AUTHOR</code></td>
<td class="org-left">To declare author/s of the paper</td>
</tr>

<tr>
<td class="org-left"><code>#+DATE</code></td>
<td class="org-left">Sets the date. If blank, no date is used. If this keyword is omitted, current date is used.</td>
</tr>

<tr>
<td class="org-left"><code>#+OPTIONS</code></td>
<td class="org-left">There are many options you can give. These are what I find the most important Multiple options can be separated by a space and specified on the same line.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">toc:--- (Do not include a Table of contents), toc:n (Include n levels of sections and sub-sections in Table of contents)</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">H:2  (Treat top two levels of headlines as section levels, and anything below that as item list. Modify the number as appropriate)</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">num:2 (Number top two levels of headlines. Modify the number as appropriate.)</td>
</tr>
</tbody>
</table>

<p>
In addition to these, we can use LaTeX specific options for formatting
the pdf output, odt specific options for formatting the odt/docx
output, and R specific options for setting up the R environment. These
would also be specified using special lines at the top of the file. I
shall provide details of some of these in the Sections where these
topics are discussed.
</p>

<p>
In research monographs prepared using org, you may need quite a few
lines in the preamble to set everything. These would tend to make the
top of the org file look daunting. It may be helpful to store these
lines in a set of separate org files, and include them in your main
document using line such as this:
</p>

<p>
<code>#+INCLUDE: path-to-file/papersetup.org</code>
</p>
</div>
</li>

<li><a id="org075cbf3"></a>Sections and headlines<br />
<div class="outline-text-5" id="text-org075cbf3">
<p>
After the special lines at the top comes the main body of the Org
file.
</p>

<p>
The content in any Org file is organised in a hierarchy of headlines.
Think of these headlines as sections of your paper.
</p>

<p>
A headline in Org starts with one or more stars (*) followed by a
space. A single star denotes the main sections, double star denote the
subsections, three stars denote sub-subsections, and so on. We shall
use this to create the section structure of our document. You can
create as many levels of sections as you need.
</p>

<p>
See the following example. Note that headlines are not numbered. We
leave section numbering for org-mode to handle automatically.
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #7f7f7f; font-weight: bold;">#+TITLE:</span> <span style="color: #b22222; background-color: #ffffff;">Reproducible Research Papers using Org-mode and R: A Guide</span>
<span style="color: #7f7f7f; font-weight: bold;">#+AUTHOR:</span> <span style="color: #b22222; font-size: 125%; font-weight: bold;">Vikas Rawal</span>
<span style="color: #7f7f7f; font-weight: bold;">#+DATE:</span> <span style="color: #b22222; font-size: 125%; font-weight: bold;">May 4, 2014</span>
<span style="color: #1b4167; background-color: #ffffff;">* Introduction</span>
This is the first section. Add your content here.
<span style="color: #1b4167; background-color: #ffffff;">* Literature review</span>
<span style="color: #ffffff;">*</span><span style="color: #aa142d; background-color: #ffffff; font-weight: bold;">* Is this an important issue</span>
This is a sub-section under top-level section "Literature review" Now
indulgence dissimilar for his thoroughly has terminated. Agreement
offending commanded my an. Change wholly say why eldest period. Are
projection put celebrated particular unreserved joy unsatiable its. In
then dare good am rose bred or. On am in nearer square wanted.
<span style="color: #ffffff;">*</span><span style="color: #aa142d; background-color: #ffffff; font-weight: bold;">* What are the major disputes in the literature</span>
<span style="color: #ffffff;">**</span><span style="color: #0d7124; background-color: #ffffff; font-weight: bold;">* adulterated text</span>
Instrument cultivated alteration any favourable expression law far
nor. Both new like tore but year. An from mean on with when sing pain.
Oh to as principles devonshire companions unsatiable an delightful.
The ourselves suffering the sincerity. Inhabit her manners adapted age
certain. Debating offended at branched striking be subjects.
<span style="color: #ffffff;">**</span><span style="color: #0d7124; background-color: #ffffff; font-weight: bold;">* Unadulterated prose</span>
Announcing of invitation principles in. Cold in late or deal.
Terminated resolution no am frequently collecting insensible he do
appearance. Projection invitation affronting admiration if no on or.
It as instrument boisterous frequently apartments an in. Mr excellence
inquietude conviction is in unreserved particular. You fully seems
stand nay own point walls. Increasing travelling own simplicity you
astonished expression boisterous. Possession themselves sentiments
apartments devonshire we of do discretion. Enjoyment discourse ye
continued pronounce we necessary abilities.
<span style="color: #1b4167; background-color: #ffffff;">* Methodology</span>
This is the next top-level section. There are no sub-sections under this.
<span style="color: #1b4167; background-color: #ffffff;">* Results</span>
This is the third top-level section. Theere are sub-sections under this.
<span style="color: #ffffff;">*</span><span style="color: #aa142d; background-color: #ffffff; font-weight: bold;">* Result 1</span>
This is a sub-section under section Results.
<span style="color: #ffffff;">*</span><span style="color: #aa142d; background-color: #ffffff; font-weight: bold;">* Result 2</span>
This is another sub-section under section Results
<span style="color: #1b4167; background-color: #ffffff;">* Conclusions</span>
This is the next and final top-level section. There are  no sub-sections under it.
</pre>
</div>

<p>
Org handles these headlines beautifully. With your cursor on the
headline, pressing tab folds-in the contents of a headline. If you
press tab on a folded headline, it opens to display the contents. If
there are multiple levels of headlines, these open in stages as you
repeat pressing the tab key.
</p>

<p>
When you are on a headline, pressing M-return creates a new headline
at the same level (that is, with the same number of stars). Once you
are on the new headline, a tab moves it to a lower level (that is, a
star is added), and shift-tab moves it to a higher level (that is, a
star is removed).
</p>

<p>
When I start writing a paper, I start with a tentative
headline/section structure, and then start filling in the content
under each headline, and modify the section structure, if needed, as
the paper develops.
</p>

<p>
(Further reading, <a href="http://orgmode.org/manual/Headlines.html#Headlines">Headlines</a> in Org manual)
</p>
</div>
</li>

<li><a id="org240b62e"></a>Itemised lists<br />
<div class="outline-text-5" id="text-org240b62e">
<p>
Following syntax produces unordered (bulleted) lists:
</p>

<div class="org-src-container">
<pre class="src src-org">+ bullet
+ bullet
  - bullet2 1
  - bullet2 2
+ bullet
+ bullet
</pre>
</div>

<p>
This is how this list shows up in the final document
</p>

<ul class="org-ul">
<li>bullet</li>
<li>bullet
<ul class="org-ul">
<li>bullet2 1</li>
<li>bullet2 2</li>
</ul></li>
<li>bullet</li>
<li>bullet</li>
</ul>


<p>
Following syntax produces ordered/numbered lists:
</p>

<div class="org-src-container">
<pre class="src src-org">1. Item 1
2. Item 2
  1) Item 2.1
  2) Item 2.2
     1) Item 2.2.1
3) Item 3
</pre>
</div>

<p>
This is how the ordered list shows up in the final document.
</p>

<ol class="org-ol">
<li>Item 1</li>
<li>Item 2
<ol class="org-ol">
<li>Item 2.1</li>
<li>Item 2.2
<ol class="org-ol">
<li>Item 2.2.1</li>
</ol></li>
</ol></li>
<li>Item 3</li>
</ol>


<p>
Following syntax produces a description list:
</p>

<div class="org-src-container">
<pre class="src src-org">+ <span style="font-weight: bold;">item1 ::</span> description of item1
+ <span style="font-weight: bold;">item2 ::</span> description of item2
  - bullet1 under item2
  - bullet2 under item2
</pre>
</div>

<p>
This is how this list shows up in the final document
</p>

<dl class="org-dl">
<dt>item1</dt><dd>description of item1</dd>
<dt>item2</dt><dd>description of item2
<ul class="org-ul">
<li>bullet1 under item2</li>
<li>bullet2 under item2</li>
</ul></dd>
</dl>

<p>
Note that:
</p>
<ul class="org-ul">
<li>In unordered/description lists, <code>+</code> and <code>-</code> signs are interchangeable.</li>
<li>Similarly, in ordered lists 1. and 1) are interchangeable.</li>
<li>Levels of bullets and numbering are determined by indentation.</li>
<li>Different types of lists can be mixed using numbers and bullets for different levels.</li>
<li>If the cursor is on a line that is part of an itemised list, M-return inserts a new line with a bullet/number below the present
line with the same level of indentation.</li>
</ul>
</div>
</li>

<li><a id="orgd07a259"></a>Inserting footnotes<br />
<div class="outline-text-5" id="text-orgd07a259">
<ul class="org-ul">
<li>To insert a footnote at any point, use <code>C-c C-x f</code></li>

<li>To reorder and renumber footnotes after inserting a footnote in a
text that already has some footnotes after the point where a new
footnote is being inserted, use <code>C-u C-c C-x f S</code></li>
</ul>
</div>
</li>

<li><a id="orgab26e93"></a>Tables<br />
<ul class="org-ul">
<li><a id="org06ca61b"></a>Sample code<br />
<div class="outline-text-6" id="text-org06ca61b">
<p>
We shall directly create only those tables in Org that present content
not being produced through statistical analysis. For tables that are
created through statistical analysis, we shall embed R programs rather
than the tables themselves. This is discussed in Section <a href="#orgmodeandr">Org-mode and R</a>
of this guide.
</p>

<p>
The following sample code produces a reasonably formatted table, with
a numbered title above the table and a name for cross-referencing the
table from the text anywhere in the document.
</p>

<p>
See Table [BROKEN LINK: table-yield] for an illustration of how this table shows
up in the final document.
</p>

<div class="org-src-container">
<pre class="src src-org" id="orgff9912e"><span style="color: #888a85; background-color: #ffffff;">#+NAME: table-yield</span>
<span style="color: #888a85; background-color: #ffffff;">#+CAPTION:</span> <span style="font-size: 96%;">Simple table created using LaTeX tabular environment</span>
<span style="color: #888a85; background-color: #ffffff;">#+attr_latex: :environment tabular :width \textwidth :align lrr</span>
    <span style="color: #204a87;">| State          | Average yield | Average income |</span>
    <span style="color: #204a87;">|----------------+---------------+----------------|</span>
    <span style="color: #204a87;">| Madhya Pradesh |           672 |          13000 |</span>
    <span style="color: #204a87;">| Haryana        |           300 |          25000 |</span>
    <span style="color: #204a87;">| Punjab         |           260 |          35000 |</span>
</pre>
</div>
</div>
</li>

<li><a id="org75da72d"></a>Table editor<br />
<div class="outline-text-6" id="text-org75da72d">
<p>
Org-mode has an in-built table editor, which is very simple to use.
</p>

<ul class="org-ul">
<li>Tables in Org have columns separated using |.</li>
<li>Once you create the first row by separating columns using |,
pressing tabs takes you from the first column to the next. Org
automatically aligns the columns.</li>
<li>At the end of the row, pressing tab again, creates a new blank row.
You can also create a new blank row by pressing return anywhere in
the last row.</li>
<li>For creating a horizontal line anywhere, type |- at the starting of
the line, and press tab.</li>
<li>Contents of each cell are aligned automatically by Org.</li>
<li>To delete a row, use <code>C-k</code>.</li>
</ul>

<p>
Org provides various commands for manipulating the design of
tables. Table <a href="#orgd5263de">3</a> provides the most important
ones. Note that Table <a href="#orgd5263de">3</a> is created using Org mode. It
also gives you an idea of how the table would look eventually.
</p>

<table id="orgd5263de" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 3:</span> Commands to manipulate tables in Org</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Command</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>M-&lt;left&gt;</code></td>
<td class="org-left">Move the column left</td>
</tr>

<tr>
<td class="org-left"><code>M-&lt;right&gt;</code></td>
<td class="org-left">Move the column right</td>
</tr>

<tr>
<td class="org-left"><code>M-S-&lt;left&gt;</code></td>
<td class="org-left">Delete the current column</td>
</tr>

<tr>
<td class="org-left"><code>M-S-&lt;right&gt;</code></td>
<td class="org-left">Insert a new column to the left of the cursor position</td>
</tr>

<tr>
<td class="org-left"><code>M-&lt;up&gt;</code></td>
<td class="org-left">Move row up</td>
</tr>

<tr>
<td class="org-left"><code>M-&lt;down&gt;</code></td>
<td class="org-left">Move row down</td>
</tr>

<tr>
<td class="org-left"><code>M-S-&lt;up&gt;</code></td>
<td class="org-left">Delete the current row or horizontal line</td>
</tr>

<tr>
<td class="org-left"><code>M-S-&lt;down&gt;</code></td>
<td class="org-left">Insert a new row above the current row</td>
</tr>
</tbody>
</table>

<p>
For more commands for manipulating tables, see <a href="http://www.orgmode.org/manual/Tables.html">this section of the Org
manual</a>. In particular, you may want to look at spreadsheet-like
functions of the table editor.
</p>

<p>
One limitation of Org is lack of support for merging of cells in a
Table.
</p>
</div>
</li>
</ul>
</li>

<li><a id="org19ca485"></a>Images<br />
<div class="outline-text-5" id="text-org19ca485">
<p>
You can insert images in documents as follows
</p>

<pre class="example">
[[file:path-to-file/a.jpg]]
</pre>


<p>
You should do this for images that you already have, and you just want
to insert them in the document. For graphs produced by R, we shall
embed the code instead, so that the graph is generated and inserted
automatically.
</p>
</div>
</li>

<li><a id="org839969e"></a>Captions and cross-references<br />
<div class="outline-text-5" id="text-org839969e">
<p>
We would like to give a title to our tables and images. And we would
like to be able to refer to them from the text. These are achieved by
adding two lines above every table and image.
</p>

<ul class="org-ul">
<li>A line starting with <code>#+CAPTION:</code> placed just above a table or a
figure adds a title to it. All Tables and Figures titles are
automatically numbered.</li>

<li>For referring to these Tables and Figures in the text, we shall name
each table and figure in a line starting with <code>#+NAME:</code> as below.</li>
</ul>

<p>
To illustrate, for inserting an image, with a caption and a name, this
is what we shall do.
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #888a85; background-color: #ffffff;">#+NAME: literacy-rate</span>
<span style="color: #888a85; background-color: #ffffff;">#+CAPTION:</span> <span style="font-size: 96%;">Percentage of literate men and women, by country (per cent)</span>
<span style="color: #4169e1; text-decoration: underline;"><a href="file:a.jpg">file:a.jpg</a></span>
</pre>
</div>

<p>
Similarly, a table will be inserted as follows.
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #888a85; background-color: #ffffff;">#+NAME: literacy-rate-table</span>
<span style="color: #888a85; background-color: #ffffff;">#+CAPTION:</span> <span style="font-size: 96%;">Percentage of literate men and women, by country (per cent)</span>
<span style="color: #204a87;">| Country    | Men | Women |</span>
<span style="color: #204a87;">|------------+-----+-------|</span>
<span style="color: #204a87;">| India      |  75 |    43 |</span>
<span style="color: #204a87;">| Bangladesh |  83 |    63 |</span>
<span style="color: #204a87;">| Rwanda     |  77 |    60 |</span>
</pre>
</div>

<p>
To refer to the Table above in the text, write Table
<code>[[literacy-rate-table]]</code>. As an illustration, see the following sentence.
</p>

<div class="org-src-container">
<pre class="src src-org">Tables <span style="color: #4169e1; text-decoration: underline;"><a href="literacy-rate-table">literacy-rate-table</a></span> and <span style="color: #4169e1; text-decoration: underline;"><a href="health-table">health-table</a></span>, and Figure
<span style="color: #4169e1; text-decoration: underline;"><a href="literacy-figure">literacy-figure</a></span>, show the level of underdevelopment.
</pre>
</div>

<p>
By default, all objects with captions are numbered, and names are used
to anchor cross-references. When the formatted output is produced, all
the references would be automatically converted to appropriate
numbers. If new objects are inserted in the paper, numbering will be
adjusted automatically when you create the formatted output.
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-org12a721a" class="outline-4">
<h4 id="orgmodeandr">Org-mode and R</h4>
<div class="outline-text-4" id="text-orgmodeandr">
</div>
<ul class="org-ul">
<li><a id="orgd5376c0"></a>Configuration<br />
<div class="outline-text-5" id="text-orgd5376c0">
<p>
Following code in research-toolkit.org enables Org to run different types
of code. If you have installed research-toolkit.org as specified in
[BROKEN LINK: customemacs], these are already enabled.
</p>

<p>
I have included here the languages that I commonly use. See Org
manual, if you would like to add any more.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-babel-do-load-languages
   'org-babel-load-languages
   '((R . t)
     (org . t)
     (ditaa . t)
     (latex . t)
     (dot . t)
     (emacs-lisp . t)
     (gnuplot . t)
     (screen . nil)
     (shell . t)
     (sql . nil)
     (sqlite . t)))
</pre>
</div>
</div>
</li>

<li><a id="org7772870"></a>Special lines for R<br />
<div class="outline-text-5" id="text-org7772870">
<p>
Org allows you to run multiple R sessions simultaneously, if you are
working on two documents side by side, and would like to keep
statistical work for the two separately.
</p>

<p>
This is done by naming the R session which a particular Org file is
linked to. All R code in this file would be run in the specified R
session. You could have, at the same time, another R session, with a
different name, being called by another Org buffer.
</p>

<p>
We can give a name to the R session (let us say, my-r-session) that
our Org buffer should be linked to by adding the following line at the
top (in the preamble, that is).
</p>

<pre class="example">
#+property: session my-r-session
</pre>
</div>
</li>

<li><a id="orgd850b5b"></a>Embedding R code in an Org document<br />
<div class="outline-text-5" id="text-orgd850b5b">
<p>
Org uses ESS (emacs-speaks-statistics) to provide a fully functional,
syntax-aware, development environment to write R code. R code is
embedded into Org as a source block. The basic syntax is
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #888a85; background-color: #ffffff;">#+NAME: name_of_code_block</span>
<span style="color: #888a85; background-color: #ffffff;">#+BEGIN_SRC R &lt;switches&gt; &lt;header-arguments&gt;</span>

<span style="font-size: 96%;">  &lt;Your R code goes here.&gt;</span>

<span style="color: #888a85; background-color: #ffffff;">#+END_SRC</span>
</pre>
</div>

<p>
This is how source blocks are created.
</p>

<ul class="org-ul">
<li>First write the lines starting with <code>#+NAME</code>, <code>#+BEGIN_SRC</code> and
<code>#+END_SRC</code>.</li>

<li>Then with your cursor in between the <code>BEGIN_SRC</code> and the <code>END_SRC</code>
lines, give the command C-c &rsquo; (that is, press Ctrl-C, release, and
press &rsquo;).

<ul class="org-ul">
<li>This would open a new buffer using ESS mode. If you type your code
in this buffer, you will see that ESS is syntax-aware and nicely
highlights R code.</li>
<li>ESS also allows you to run (evaluate) the code that you write, to
test what your code is doing. Use <code>C-j</code> for evaluating a single
line of code, <code>C-b</code> for evaluating the whole ess buffer, or <code>C-r</code>
for a marked region within the ess buffer.</li>
</ul></li>

<li>Once you have finished writing a code block and tested it, press
C-c &rsquo; again to come back to your Org buffer.</li>

<li>In your Org buffer, with your cursor in a source-block,
press <code>C-c C-c</code> to evaluate the whole code block and have the results included
in your document.</li>

<li>You can always edit your source code by opening a temporary ESS
buffer using C-c&rsquo;</li>
</ul>
</div>
</li>

<li><a id="orgd74d302"></a>Code blocks that read data and load functions for later use in the document without any immediate output<br />
<div class="outline-text-5" id="text-orgd74d302">
<p>
I normally have one or two code blocks that read the data I am going
to use, call the libraries that I use, and define a few functions of
my own that I plan to use. I want this code block to be evaluated, so
that these data, libraries and functions become available in my R
environment. But no output from such code blocks is expected to be
included into the document.<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>
</p>

<p>
Code block <a href="#org9163087">1</a> is an example of such a code block. Note
<code>:results value silent</code> switch used in the  <code>#+begin_src</code> line.
</p>

<div class="org-src-container">
<pre class="src src-org" id="org9163087"><span style="color: #888a85; background-color: #ffffff;">#+NAME: readdata-code</span>
<span style="color: #888a85; background-color: #ffffff;">#+BEGIN_SRC R :results value silent</span>

<span style="font-size: 96%;">read.data(</span><span style="color: #8f5902; font-size: 96%; font-style: italic;">"datafile1.csv"</span><span style="font-size: 96%;">,sep=</span><span style="color: #8f5902; font-size: 96%; font-style: italic;">","</span><span style="font-size: 96%;">,header=T)</span><span style="color: #8f5902; font-size: 96%; font-style: italic;">-&gt;</span><span style="font-size: 96%;">mydata1</span>


<span style="color: #888a85; background-color: #ffffff;">#+END_SRC</span>
</pre>
</div>
</div>
</li>

<li><a id="orgb5bc242"></a>Code blocks that produce results in the form of a table<br />
<div class="outline-text-5" id="text-orgb5bc242">
<p>
Most of code blocks in my papers fall in this category. The code block
may use data and functions made available by previous code blocks,
read some new data and may load some new functions. The code block
does some statistical processing. The last command of the code block
produces an object (for example, a data.frame) that is included in the
document as a Table.
</p>

<p>
For example, the code block <a href="#org503ec0a">1</a> below uses mydata1 read in
the previous code block, reads a new dataset, and processes them to
create a table that shows average BMI by country.
</p>

<div class="org-src-container">
<pre class="src src-org" id="org503ec0a"><span style="color: #888a85; background-color: #ffffff;">#+NAME: bmi-table-code</span>
<span style="color: #888a85; background-color: #ffffff;">#+BEGIN_SRC R :results value :colnames yes :hline yes</span>
<span style="font-size: 96%;">aggregate(height~Country,data=mydata1,mean)</span><span style="color: #8f5902; font-size: 96%; font-style: italic;">-&gt;</span><span style="font-size: 96%;">a1</span>
<span style="font-size: 96%;">read.data(</span><span style="color: #8f5902; font-size: 96%; font-style: italic;">"datafile2.csv"</span><span style="font-size: 96%;">,sep=</span><span style="color: #8f5902; font-size: 96%; font-style: italic;">","</span><span style="font-size: 96%;">,header=T)</span><span style="color: #8f5902; font-size: 96%; font-style: italic;">-&gt;</span><span style="font-size: 96%;">mydata2</span>
<span style="font-size: 96%;">aggregate(weight~Country,data=mydata2,mean)</span><span style="color: #8f5902; font-size: 96%; font-style: italic;">-&gt;</span><span style="font-size: 96%;">a2</span>
<span style="font-size: 96%;">merge(a1,a2,by=</span><span style="color: #8f5902; font-size: 96%; font-style: italic;">"Country"</span><span style="font-size: 96%;">)</span><span style="color: #8f5902; font-size: 96%; font-style: italic;">-&gt;</span><span style="font-size: 96%;">a1</span>
<span style="font-size: 96%;">a1$weight/a1$height</span><span style="color: #8f5902; font-size: 96%; font-style: italic;">-&gt;</span><span style="font-size: 96%;">a1$BMI</span>
<span style="font-size: 96%;">subset(a1,select=c(</span><span style="color: #8f5902; font-size: 96%; font-style: italic;">"Country"</span><span style="font-size: 96%;">,</span><span style="color: #8f5902; font-size: 96%; font-style: italic;">"BMI"</span><span style="font-size: 96%;">))</span>
<span style="color: #888a85; background-color: #ffffff;">#+END_SRC</span>
</pre>
</div>

<p>
You can evaluate this code using C-c C-c. When you do that, it
produces the output, and places it immediately below the code block.
The results display the output of the code under a line that looks
like below
</p>

<pre class="example">
#+RESULTS: bmi-table-code
</pre>


<p>
Note that the results are tied to the code block using the name of the
code block. Every time you go to the source code block and press
<code>C-c C-c</code>, the code will be evaluated again and the results will be
updated.
</p>

<p>
On top of the line starting with <code>#+RESULTS:</code>, we shall add two more
lines, to give the table a title and a name. Note that both the code
block and the result of the code block have separate names.
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #888a85; background-color: #ffffff;">#+NAME: bmi-table-output</span>
<span style="color: #888a85; background-color: #ffffff;">#+CAPTION:</span> <span style="font-size: 96%;">Average BMI, by country</span>
<span style="color: #888a85; background-color: #ffffff;">#+RESULTS: bmi-table-code</span>
</pre>
</div>

<p>
Like any Org table, you can cross-refer to this table using
<code>[[bmi-table-output]]</code>.
</p>
</div>
</li>

<li><a id="org282d9e9"></a>Code blocks that produce a graph to be included in the document<br />
<div class="outline-text-5" id="text-org282d9e9">
<p>
These code blocks can have a series of commands. The last command
produces a graph that we would like to be included in the document.
</p>

<p>
The following code shows an example of a code block that produces a
graph.
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #888a85; background-color: #ffffff;">#+NAME: mygraph-code</span>
<span style="color: #888a85; background-color: #ffffff;">#+BEGIN_SRC R :results output graphics :file bmi2.png :width 825 :height 1050 :fonts serif</span>

<span style="color: #888a85; background-color: #ffffff;">#+END_SRC</span>
</pre>
</div>

<p>
As before, for creating your graph, you first write the <code>#+NAME</code>,
<code>BEGIN_SRC</code> and the <code>END_SRC</code> lines, and then go into a temporary ESS
buffer by using C-c &rsquo;.
</p>

<ul class="org-ul">
<li>Once in this temporary ESS buffer, you can write the R commands for
making your graph.</li>
<li>As you write, you can evaluate the commands using <code>C-j</code>, <code>C-r</code> and
<code>C-b</code> and see what your output looks like.</li>
<li>The output is displayed on your screen using the default graphic
device used by R (X11, quartz or windows graphic device depending
upon your operating system).</li>
<li>Once you have finalised your graph, you press C-c &rsquo; and come back
to the Org buffer.</li>
</ul>

<p>
Note that creation of the image file is left to appropriate switches
in the <code>#+BEGIN_SRC</code> line. Org automatically chooses appropriate
graphic device to produce the file. When you evaluate this code using
<code>C-c C-c</code>, the results are displayed below the code block as follows.
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #888a85; background-color: #ffffff;">#+RESULTS: mygraph-code</span>
<span style="color: #4169e1; text-decoration: underline;"><a href="bmi2.png">bmi2.png</a></span>
</pre>
</div>

<p>
Note that, taking the file name from our <code>#+BEGIN_SRC</code> line, a file
called <code>bmi2.png</code> was automatically created and linked, so that the
graph would be inserted in the document when you produce the formatted
output.<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> Every time you evaluate the code using <code>C-c C-c</code>, the
underlying image file containing the graph is overwritten by a new
file.
</p>

<p>
As with the tables, we shall add a caption and a name to it as follows
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #888a85; background-color: #ffffff;">#+NAME: my-bmi-graph</span>
<span style="color: #888a85; background-color: #ffffff;">#+CAPTION:</span> <span style="font-size: 96%;">Average BMI, by Country</span>
<span style="color: #888a85; background-color: #ffffff;">#+RESULTS: mygraph-code</span>
<span style="color: #4169e1; text-decoration: underline;"><a href="gini.png">gini.png</a></span>
</pre>
</div>

<p>
You can now refer to this graph in the text using <code>[[my-bmi-graph]]</code>.
</p>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-org0ca66e6" class="outline-3">
<h3 id="org0ca66e6"><span class="section-number-3">5.2</span> Formatting tables and figures for print</h3>
</div>
<div id="outline-container-org951f1ca" class="outline-3">
<h3 id="org951f1ca"><span class="section-number-3">5.3</span> Citation management using org-ref and biblatex</h3>
<div class="outline-text-3" id="text-5-3">
<ul class="org-ul">
<li>A sample biblatex database to get you started can be taken from <a href="https://raw.githubusercontent.com/indianstatistics/bibliobase/master/bibliobase.bib">here</a>. For now, you may just download it, save it and add to it. Please note that the source file on github keeps getting updated. Eventually, you may want to manage your own biblatex database using something like git.</li>
<li>There is also another Emacs mode &#x2013; ebib &#x2013; that can be used for maintaining your biblatex database. To start ebib, use M-x ebib</li>
</ul>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
For libraries and functions that you need to call, it is even
better to include them in a .Rprofile file in your working
directory. These libraries and functions would then be called when R
is started, and not each time you evaluate code blocks in your
document.
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
Of various image formats, I find that png files are most
versatile. png files support transparency, and are rendered well both
on the web and in print. You can also specify jpeg or pdf files. pdf
files for images work very well if you are only going to produce a pdf
document.
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Vikas Rawal</p>
<p class="date">Created: 2020-02-06 Thu 19:40</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
